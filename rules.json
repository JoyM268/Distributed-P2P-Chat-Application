{
	"rules": {
		"users": {
			".indexOn": ["email", "username"],
			"$uid": {
				".read": "auth != null",
				".write": "auth != null && auth.uid === $uid",

				"email": {
					".read": true
				},
				"private": {
					".read": false
				}
			}
		},

		"usernames": {
			"$username": {
				".read": true,
				".write": "auth != null && (!data.exists() || data.val() === auth.uid)",
				".validate": "newData.exists() ? newData.val() === auth.uid : true"
			}
		},

		"friends": {
			"$uid": {
				".read": "auth != null && auth.uid === $uid",
				"$friendUid": {
					".write": "auth != null && (auth.uid === $uid || auth.uid === $friendUid)"
				}
			}
		},

		"friend_requests": {
			"$uid": {
				".read": "auth != null && auth.uid === $uid",
				"$senderUid": {
					".read": "auth != null && (auth.uid === $uid || auth.uid === $senderUid)",
					".write": "auth != null && (auth.uid === $uid || auth.uid === $senderUid)"
				}
			}
		},

		"status": {
			"$uid": {
				".read": "auth != null",
				".write": "auth != null && auth.uid === $uid"
			}
		},

		"signaling": {
			"$receiverUid": {
				".read": "auth != null && auth.uid === $receiverUid",
				"$signalId": {
					".write": "auth != null"
				}
			}
		}
	}
}
